-- Script pour ajouter des missions premium d'exemple
-- À exécuter après la migration pour tester l'interface

-- D'abord, créer quelques profils d'établissements pour les tests
INSERT INTO profiles (id, user_type, first_name, last_name, organization_name, speciality, avatar_url, is_verified)
VALUES 
  ('550e8400-e29b-41d4-a716-446655440001', 'establishment', NULL, NULL, 'Hôpital Saint-Antoine', 'Cardiologie', NULL, true),
  ('550e8400-e29b-41d4-a716-446655440002', 'establishment', NULL, NULL, 'Clinique du Parc', 'Chirurgie', NULL, true),
  ('550e8400-e29b-41d4-a716-446655440003', 'establishment', NULL, NULL, 'Centre Médical Premium', 'Médecine générale', NULL, true)
ON CONFLICT (id) DO NOTHING;

-- Ajouter quelques missions premium d'exemple
INSERT INTO premium_missions (
  id,
  establishment_id,
  title,
  description,
  specialty,
  location,
  start_date,
  end_date,
  application_deadline,
  exclusive_until,
  salary_min,
  salary_max,
  currency,
  urgency,
  duration,
  mission_type,
  premium_perks,
  benefits,
  requirements,
  spots_available,
  spots_filled,
  establishment_name,
  establishment_rating,
  status,
  is_active
) VALUES 
(
  '11111111-1111-1111-1111-111111111111',
  '550e8400-e29b-41d4-a716-446655440001',
  'Garde de Cardiologie Urgent - Week-end',
  'Mission urgente pour couverture cardiologique suite à désistement. Prise en charge des urgences cardiaques et consultations programmées. Équipe expérimentée et matériel de pointe disponible.',
  'Cardiologie',
  'Paris 12e - Hôpital Saint-Antoine',
  '2025-08-16 08:00:00+02',
  '2025-08-18 20:00:00+02',
  '2025-08-15 18:00:00+02',
  '2025-08-15 12:00:00+02',
  850.00,
  1200.00,
  'EUR',
  'critical',
  'Week-end (54h)',
  'urgent',
  ARRAY['Parking privé', 'Repas fournis', 'Chambre de garde', 'Transport remboursé'],
  ARRAY['Formation ECG avancé', 'Accès bibliothèque médicale', 'Certification urgences'],
  ARRAY['Cardiologue confirmé', 'Expérience urgences', 'Habilitation défibrillateur'],
  1,
  0,
  'Hôpital Saint-Antoine',
  4.8,
  'available',
  true
),
(
  '22222222-2222-2222-2222-222222222222',
  '550e8400-e29b-41d4-a716-446655440002',
  'Chirurgie VIP - Intervention Programmée',
  'Intervention chirurgicale pour patient VIP. Bloc opératoire privatif, équipe dédiée. Mission de prestige avec rémunération exceptionnelle.',
  'Chirurgie générale',
  'Neuilly-sur-Seine - Clinique du Parc',
  '2025-08-20 09:00:00+02',
  '2025-08-20 16:00:00+02',
  '2025-08-17 12:00:00+02',
  '2025-08-16 23:59:00+02',
  1500.00,
  2000.00,
  'EUR',
  'high',
  '1 jour (7h)',
  'vip',
  ARRAY['Valet parking', 'Restaurant gastronomique', 'Suite de repos', 'Chauffeur disponible'],
  ARRAY['Certification haute technicité', 'Réseau médical VIP', 'Recommandations privilégiées'],
  ARRAY['Chirurgien senior', 'Min 10 ans expérience', 'Spécialisation cœlioscopie'],
  1,
  0,
  'Clinique du Parc',
  4.9,
  'available',
  true
),
(
  '33333333-3333-3333-3333-333333333333',
  '550e8400-e29b-41d4-a716-446655440003',
  'Mission Spécialisée - Télémédecine Premium',
  'Consultation spécialisée à distance pour patients premium. Plateforme de télémédecine haut de gamme, équipement fourni. Horaires flexibles.',
  'Médecine générale',
  'Télétravail - Centre Médical Premium',
  '2025-08-17 14:00:00+02',
  '2025-08-17 18:00:00+02',
  '2025-08-16 10:00:00+02',
  '2025-08-15 20:00:00+02',
  400.00,
  600.00,
  'EUR',
  'high',
  '4 heures',
  'specialized',
  ARRAY['Équipement fourni', 'Formation plateforme', 'Support technique', 'Horaires flexibles'],
  ARRAY['Certification télémédecine', 'Formation digitale', 'Réseau médical digital'],
  ARRAY['Médecin généraliste', 'Expérience télémédecine appréciée', 'Bonne connexion internet'],
  2,
  0,
  'Centre Médical Premium',
  4.7,
  'available',
  true
),
(
  '44444444-4444-4444-4444-444444444444',
  '550e8400-e29b-41d4-a716-446655440001',
  'Garde de Nuit - Urgences Cardiologiques',
  'Garde de nuit spécialisée en cardiologie. Prise en charge des urgences cardiaques. Équipe de nuit réduite, autonomie requise.',
  'Cardiologie',
  'Paris 12e - Hôpital Saint-Antoine',
  '2025-08-19 20:00:00+02',
  '2025-08-20 08:00:00+02',
  '2025-08-18 16:00:00+02',
  '2025-08-18 12:00:00+02',
  600.00,
  800.00,
  'EUR',
  'high',
  'Nuit (12h)',
  'emergency',
  ARRAY['Chambre de garde premium', 'Petit-déjeuner offert', 'Transport nuit', 'Prime de nuit'],
  ARRAY['Expérience urgences nuit', 'Autonomie renforcée', 'Formation continue'],
  ARRAY['Cardiologue expérimenté', 'Garde de nuit habituelle', 'Décisions autonomes'],
  1,
  0,
  'Hôpital Saint-Antoine',
  4.8,
  'available',
  true
),
(
  '55555555-5555-5555-5555-555555555555',
  '550e8400-e29b-41d4-a716-446655440002',
  'Consultation Expert - Patient International',
  'Consultation spécialisée pour patient international. Prise en charge VIP, interprétariat fourni. Mission de prestige avec suivi personnalisé.',
  'Médecine interne',
  'Paris 16e - Clinique du Parc',
  '2025-08-21 10:00:00+02',
  '2025-08-21 12:00:00+02',
  '2025-08-19 18:00:00+02',
  '2025-08-19 12:00:00+02',
  800.00,
  1000.00,
  'EUR',
  'high',
  '2 heures',
  'vip',
  ARRAY['Accueil VIP', 'Interprète fourni', 'Dossier traduit', 'Suivi personnalisé'],
  ARRAY['Réseau international', 'Certification langues', 'Expérience multiculturelle'],
  ARRAY['Interniste expérimenté', 'Anglais fluent', 'Expérience internationale'],
  1,
  0,
  'Clinique du Parc',
  4.9,
  'available',
  true
);

-- Mettre à jour les timestamps pour que les missions soient fraîches
UPDATE premium_missions 
SET 
  created_at = NOW() - INTERVAL '2 hours',
  updated_at = NOW() - INTERVAL '1 hour'
WHERE id IN (
  '11111111-1111-1111-1111-111111111111',
  '22222222-2222-2222-2222-222222222222',
  '33333333-3333-3333-3333-333333333333',
  '44444444-4444-4444-4444-444444444444',
  '55555555-5555-5555-5555-555555555555'
);
